\batchmode
\documentclass[article,oneside,a4paper]{memoir}
\usepackage[sc]{mathpazo}
\usepackage[final]{microtype}
\usepackage{multicol}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{tket}
\usepackage{times}
\usepackage{enumitem}

\renewcommand{\sfdefault}{pun}

\setulmarginsandblock{2.0cm}{2.0cm}{*}
\setlrmarginsandblock{1.5cm}{2.0cm}{*}
\checkandfixthelayout

\def\sangtitel#1#2{%
  \begingroup%
    \raggedright\interlinepenalty=10000
    \parfillskip=0pt plus 1fill
    \LARGE\bfseries\sffamily
    {\thechapter.\hspace{.5em}}#1
    \nobreak\quad\nobreak
    \hfill
    \penalty550\hskip0pt plus -2fill
    \nobreak\hskip1em\hbox{}\nobreak\hfill
    \nobreak\hskip-1em
    \hbox{\normalfont\Large\itshape #2}\par%
  \endgroup%
}

\newenvironment{sang}[2]{%
  \par\vspace{1.4em}%
  \addtocounter{chapter}{1}%
  \addcontentsline{toc}{chapter}{\numberline{\thechapter}#1}
  \specialindex{songs}{chapter}{#1}
  \sangtitel{#1}{#2}%
  \vspace{1.4em}%
  \begin{enumerate}[leftmargin=1.5em,align=left,labelwidth=1.2em,labelsep=0.3em,parsep=0pt]
}{%
\end{enumerate}}

\newenvironment{vers}{%
  \par%
  \pagebreak[3]%
  \item
}{}
\newenvironment{omkvaed}{%
  \par%
  \pagebreak[3]%
\item[]
    \hspace{-1.5em}\itshape Omkv√¶d:\\\relax
}{}

\newcommand{\verseend}{%
  \par%
}

\catcode`<=\active
\def<#1>{${}^{\text{#1}}$}
\def\b{${}^\mathrm{b}$}

\def\repon{\ensuremath{\|{\colon}}~\ignorespaces}
\def\repoff{\unskip~\ensuremath{ {\colon}\|}}

\setlength{\multicolsep}{0pt}

\makeatletter
\renewenvironment{theindex}
    {\let\item\@idxitem
     {\Large\bfseries\sffamily\noindent Indholdsfortegnelse\par}%
     \begingroup\setlength\multicolsep{1.25\baselineskip}%
     \begin{multicols}{3}%
       \raggedright
    }{\end{multicols}\endgroup}%
\def\indexspace{\par\penalty-300\vspace{\baselineskip}}
\renewcommand\@idxitem{\penalty0\par\hangindent1.5em}%
\makeatother

\makeindex[songs]

\begin{document}
\printindex[songs]
\clearpage
\nonstopmode
{{ document }}
\batchmode
\end{document}
